<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desi Tweet Generator ğŸ”¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-orange-50 via-white to-green-50 min-h-screen">
    <div class="max-w-4xl mx-auto p-4">
        <!-- Header -->
        <div class="text-center mb-8 pt-8">
            <div class="flex items-center justify-center gap-3 mb-3">
                <span class="text-4xl">âœ¨</span>
                <h1 class="text-4xl font-bold bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent">
                    Desi Tweet Generator
                </h1>
                <span class="text-4xl">âœ¨</span>
            </div>
            <p class="text-gray-600 text-lg">
                10 viral Hinglish tweets with masala sarcasm ğŸ”¥
            </p>
        </div>

        <!-- API Key Section -->
        <div id="apiKeySection" class="bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-orange-200">
            <h2 class="text-xl font-bold mb-3 text-gray-800">Setup (One Time)</h2>
            <p class="text-sm text-gray-600 mb-4">
                Get your free API key from: <a href="https://makersuite.google.com/app/apikey" target="_blank" class="text-blue-600 hover:underline">Google AI Studio</a>
            </p>
            <div class="flex gap-3">
                <input
                    type="password"
                    id="apiKeyInput"
                    placeholder="Apni Gemini API key yahan paste karo..."
                    class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-orange-500 focus:outline-none"
                />
                <button
                    onclick="saveApiKey()"
                    class="px-6 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-colors"
                >
                    Save
                </button>
            </div>
        </div>

        <button
            id="changeKeyBtn"
            onclick="showApiKeySection()"
            class="text-sm text-gray-500 hover:text-gray-700 mb-4 hidden"
        >
            âš™ï¸ Change API Key
        </button>

        <!-- Input Section -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-orange-200">
            <label class="block text-lg font-semibold mb-3 text-gray-800">
                Topic kya hai bhai? ğŸ¯
            </label>
            <input
                type="text"
                id="topicInput"
                placeholder="e.g., AI taking jobs, Indian traffic, job interviews..."
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-orange-500 focus:outline-none text-lg mb-4"
                onkeypress="if(event.key==='Enter') generateTweets()"
            />
            
            <button
                onclick="generateTweets()"
                id="generateBtn"
                class="w-full py-4 rounded-xl font-bold text-lg transition-all bg-gradient-to-r from-orange-500 to-green-500 hover:from-orange-600 hover:to-green-600 text-white shadow-lg hover:shadow-xl"
            >
                ğŸ”¥ Generate Viral Tweets
            </button>
        </div>

        <!-- Error Display -->
        <div id="errorBox" class="hidden bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6">
            <p class="text-red-700" id="errorText"></p>
        </div>

        <!-- Loading -->
        <div id="loadingBox" class="hidden bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6">
            <p class="text-blue-700">â³ Tweets generate ho rahe hain... thoda wait karo bhai!</p>
        </div>

        <!-- Tweets Display -->
        <div id="tweetsContainer" class="space-y-4 hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                ğŸš€ Your Viral Tweets Ready!
            </h2>
            <div id="tweetsList"></div>
            
            <div class="bg-gradient-to-r from-orange-100 to-green-100 rounded-xl p-6 mt-6">
                <h3 class="font-bold text-lg mb-2 text-gray-800">ğŸ’¡ Pro Tips:</h3>
                <ul class="space-y-2 text-gray-700">
                    <li>â€¢ Best time to post: Morning 8-10 AM or evening 8-10 PM</li>
                    <li>â€¢ Pick tweets with most sarcasm for max engagement</li>
                    <li>â€¢ Mix different tweet styles throughout the week</li>
                    <li>â€¢ Relatable + sarcastic = viral formula ğŸ”¥</li>
                </ul>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 pb-8 text-gray-600">
            <p>Made with â¤ï¸ for Indian Twitter</p>
            <p class="text-sm mt-2">Sarcasm ki dukaan, engagement ki guarantee ğŸ˜</p>
        </div>
    </div>

    <script>
        let apiKey = localStorage.getItem('geminiApiKey') || '';
        
        if (apiKey) {
            document.getElementById('apiKeySection').classList.add('hidden');
            document.getElementById('changeKeyBtn').classList.remove('hidden');
        }

        function saveApiKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            if (!key) {
                showError('API key daalo bhai!');
                return;
            }
            apiKey = key;
            localStorage.setItem('geminiApiKey', key);
            document.getElementById('apiKeySection').classList.add('hidden');
            document.getElementById('changeKeyBtn').classList.remove('hidden');
            hideError();
        }

        function showApiKeySection() {
            document.getElementById('apiKeySection').classList.remove('hidden');
            document.getElementById('changeKeyBtn').classList.add('hidden');
        }

        function showError(msg) {
            document.getElementById('errorText').textContent = msg;
            document.getElementById('errorBox').classList.remove('hidden');
        }

        function hideError() {
            document.getElementById('errorBox').classList.add('hidden');
        }

        function showLoading() {
            document.getElementById('loadingBox').classList.remove('hidden');
            document.getElementById('generateBtn').disabled = true;
            document.getElementById('generateBtn').classList.add('opacity-50', 'cursor-not-allowed');
        }

        function hideLoading() {
            document.getElementById('loadingBox').classList.add('hidden');
            document.getElementById('generateBtn').disabled = false;
            document.getElementById('generateBtn').classList.remove('opacity-50', 'cursor-not-allowed');
        }

        async function generateTweets() {
            const topic = document.getElementById('topicInput').value.trim();
            
            if (!topic) {
                showError('Bhai topic toh daal do! ğŸ˜…');
                return;
            }

            if (!apiKey) {
                showError('API key chahiye bhai! Settings mein daalo.');
                return;
            }

            hideError();
            showLoading();
            document.getElementById('tweetsContainer').classList.add('hidden');

            try {
                // Direct Gemini API call
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Generate exactly 10 viral, sarcastic, and relatable Hinglish tweets about: "${topic}". 

Requirements:
- Mix Hindi and English naturally (Hinglish style)
- Heavy on sarcasm and humor
- Relatable to Indian audience
- Each tweet should be 150-280 characters
- Use emojis strategically
- Make them actually funny and shareable
- Vary the tone: some snarky, some observational, some self-deprecating

Return ONLY the tweets, one per line, numbered 1-10. No extra explanation.`
                            }]
                        }],
                        generationConfig: {
                            temperature: 1,
                            maxOutputTokens: 2048,
                        }
                    })
                });

                const data = await response.json();

                if (!response.ok) {
                    const errorMsg = data.error?.message || 'API error ho gaya bhai!';
                    throw new Error(errorMsg);
                }

                // Extract tweets from response
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                if (!text) {
                    throw new Error('Koi response nahi aaya. Dobara try karo!');
                }

                // Parse tweets (remove numbering and clean up)
                const tweets = text
                    .split('\n')
                    .filter(line => line.trim())
                    .map(line => line.replace(/^\d+\.\s*/, '').trim())
                    .filter(tweet => tweet.length > 20);

                if (tweets.length > 0) {
                    displayTweets(tweets);
                } else {
                    showError('Koi tweets nahi aaye. Dobara try karo!');
                }
            } catch (err) {
                console.error('Error:', err);
                showError(`Error: ${err.message}`);
            } finally {
                hideLoading();
            }
        }

        function displayTweets(tweets) {
            const container = document.getElementById('tweetsList');
            container.innerHTML = '';

            tweets.forEach((tweet, index) => {
                const tweetDiv = document.createElement('div');
                tweetDiv.className = 'bg-white rounded-xl shadow-md p-5 border-2 border-gray-200 hover:border-orange-300 transition-all hover:shadow-lg';
                tweetDiv.innerHTML = `
                    <div class="flex items-start justify-between gap-4">
                        <div class="flex-1">
                            <span class="inline-block bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-semibold mb-3">
                                Tweet ${index + 1}
                            </span>
                            <p class="text-gray-800 text-lg leading-relaxed whitespace-pre-wrap">${tweet}</p>
                            <p class="text-sm text-gray-500 mt-2">${tweet.length} characters</p>
                        </div>
                        <button
                            onclick="copyTweet(\`${tweet.replace(/`/g, '\\`')}\`, ${index})"
                            id="copyBtn${index}"
                            class="flex-shrink-0 p-3 rounded-lg transition-all bg-gray-100 text-gray-600 hover:bg-gray-200"
                            title="Copy tweet"
                        >
                            ğŸ“‹
                        </button>
                    </div>
                `;
                container.appendChild(tweetDiv);
            });

            document.getElementById('tweetsContainer').classList.remove('hidden');
        }

        function copyTweet(tweet, index) {
            navigator.clipboard.writeText(tweet);
            const btn = document.getElementById(`copyBtn${index}`);
            btn.textContent = 'âœ…';
            btn.classList.add('bg-green-100', 'text-green-600');
            setTimeout(() => {
                btn.textContent = 'ğŸ“‹';
                btn.classList.remove('bg-green-100', 'text-green-600');
            }, 2000);
        }
    </script>
</body>
</html>
